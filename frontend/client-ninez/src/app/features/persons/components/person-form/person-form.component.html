<form [formGroup]="personaForm" (ngSubmit)="onSubmit()" class="max-w-lg mx-auto p-4 bg-white rounded shadow">
	<div class="mb-4">
		<label for="dni" class="block text-sm font-medium">DNI</label>
		<input
			id="dni"
			type="text"
			formControlName="dni"
			class="mt-1 block w-full border rounded px-2 py-1"
			[class.border-red-500]="personaForm.get('dni')?.invalid && personaForm.get('dni')?.touched"
		/>
		<div *ngIf="personaForm.get('dni')?.invalid && personaForm.get('dni')?.touched" class="text-red-500 text-xs">
			DNI requerido (mínimo 7 dígitos)
		</div>
	</div>

	<div *ngIf="cargando" class="mb-2 text-blue-500">Buscando persona...</div>
	<div *ngIf="personaExistente" class="mb-2 text-green-600">Persona encontrada. Puede editar los datos.</div>
	<div *ngIf="!personaExistente && personaForm.get('dni')?.valid" class="mb-2 text-yellow-600">
		No existe persona con ese DNI. Complete los datos para crearla.
	</div>

	<div class="mb-4">
		<label for="nombre" class="block text-sm font-medium">Nombre</label>
		<input id="nombre" type="text" formControlName="nombre" class="mt-1 block w-full border rounded px-2 py-1" />
	</div>
	<div class="mb-4">
		<label for="apellido" class="block text-sm font-medium">Apellido</label>
		<input id="apellido" type="text" formControlName="apellido" class="mt-1 block w-full border rounded px-2 py-1" />
	</div>
	<div class="mb-4">
		<label for="fecha_nacimiento" class="block text-sm font-medium">Fecha de nacimiento</label>
		<input id="fecha_nacimiento" type="date" formControlName="fecha_nacimiento" class="mt-1 block w-full border rounded px-2 py-1" />
	</div>
	<div class="mb-4">
		<label for="genero" class="block text-sm font-medium">Género</label>
		<input id="genero" type="text" formControlName="genero" class="mt-1 block w-full border rounded px-2 py-1" />
	</div>
	<div class="mb-4">
		<label for="nacionalidad" class="block text-sm font-medium">Nacionalidad</label>
		<input id="nacionalidad" type="text" formControlName="nacionalidad" class="mt-1 block w-full border rounded px-2 py-1" />
	</div>

	<button type="submit" [disabled]="!personaForm.valid" class="bg-blue-600 text-white px-4 py-2 rounded">
		{{ personaExistente ? 'Actualizar' : 'Crear' }}
	</button>
</form>
