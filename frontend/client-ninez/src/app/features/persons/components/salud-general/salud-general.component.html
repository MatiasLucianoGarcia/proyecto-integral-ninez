<mat-card class="form-section">
    <mat-card-header>
        <mat-card-title class="section-title">
            <mat-icon class="section-icon">medical_services</mat-icon>
            Salud General
        </mat-card-title>
    </mat-card-header>

    <mat-card-content>
        <form [formGroup]="saludForm" *ngIf="!isViewMode; else viewTemplate">
            <div class="form-grid">
                <!-- Obra Social -->
                <mat-form-field appearance="outline" class="form-field" floatLabel="always">
                    <mat-label>Obra Social / Cobertura</mat-label>
                    <input matInput formControlName="nombre" placeholder="Ej: IOMA, PAMI">
                    <mat-icon matPrefix>assignment_ind</mat-icon>
                </mat-form-field>

                <!-- Enfermedad Crónica -->
                <mat-form-field appearance="outline" class="form-field" floatLabel="always">
                    <mat-label>Enfermedad Crónica</mat-label>
                    <input matInput formControlName="enfermedad_cronica" placeholder="Ej: Diabetes, Asma">
                    <mat-icon matPrefix>healing</mat-icon>
                </mat-form-field>

                <!-- Tratamiento Prolongado -->
                <mat-form-field appearance="outline" class="form-field" floatLabel="always">
                    <mat-label>Tratamiento Prolongado</mat-label>
                    <input matInput formControlName="tratamiento_prolongado" placeholder="Descripción del tratamiento">
                    <mat-icon matPrefix>medication</mat-icon>
                </mat-form-field>

                <!-- Discapacidad -->
                <mat-form-field appearance="outline" class="form-field" floatLabel="always">
                    <mat-label>Discapacidad</mat-label>
                    <input matInput formControlName="discapacidad" placeholder="CUD / Descripción">
                    <mat-icon matPrefix>accessible</mat-icon>
                </mat-form-field>

                <!-- Adicciones -->
                <mat-form-field appearance="outline" class="form-field" floatLabel="always">
                    <mat-label>Adicciones</mat-label>
                    <input matInput formControlName="adicciones" placeholder="Consumo problemático">
                    <mat-icon matPrefix>warning</mat-icon>
                </mat-form-field>
            </div>
        </form>

        <ng-template #viewTemplate>
            <div class="view-grid">
                <div class="view-item">
                    <span class="label">Obra Social / Cobertura</span>
                    <span class="value">{{ salud?.nombre || ' - ' }}</span>
                </div>
                <div class="view-item">
                    <span class="label">Enfermedad Crónica</span>
                    <span class="value">{{ salud?.enfermedad_cronica || ' - ' }}</span>
                </div>
                <div class="view-item">
                    <span class="label">Tratamiento Prolongado</span>
                    <span class="value">{{ salud?.tratamiento_prolongado || ' - ' }}</span>
                </div>
                <div class="view-item">
                    <span class="label">Discapacidad</span>
                    <span class="value">{{ salud?.discapacidad || ' - ' }}</span>
                </div>
                <div class="view-item">
                    <span class="label">Adicciones</span>
                    <span class="value">{{ salud?.adicciones || ' - ' }}</span>
                </div>
            </div>
        </ng-template>
    </mat-card-content>

    <mat-card-actions align="end" *ngIf="!isViewMode">
        <button mat-raised-button color="primary" (click)="onSave()"
            [disabled]="saludForm.invalid || saludForm.pristine">
            <mat-icon>save</mat-icon>
            Guardar cambios
        </button>
    </mat-card-actions>
</mat-card>